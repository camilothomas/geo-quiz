var canvas=document.querySelector(".myCanvas"),width=window.innerWidth,height=window.innerHeight,ctx=canvas.getContext("2d");let newW,newH,image=new Image,endImage=new Image;endImage.src="img/tucan.png";let gameOver=!1,countries=[["B","Belize",!1,75],["CR","Costa Rica",!1,130],["ES","El Salvador",!1,145],["G","Guatemala",!1,135],["H","Honduras",!1,125],["N","Nicaragua",!1,145],["P","Panama",!1,120]];var curX,curY,pressed=!1;let id;function imgSetter(e){image.src="img/"+e,image.onload=function(){ctx.drawImage(image,0,0,1193,873,0,0,newW,newH)}}function setNewWH(){873/1193<height/width?newH=873*(newW=.95*width)/1193:newW=1193*(newH=.95*height)/873,canvas.width=newW,canvas.height=newH}function drawNames(){ctx.fillStyle="rgb(255,255,255)",ctx.font="28px Fredoka One";for(let e=0;e<countries.length;e++)countries[e][2]||(ctx.fillText(countries[e][1],50,newH*(.93-.07*e)),ctx.lineWidth=2.5,ctx.strokeStyle="rgb(0,155,215)",ctx.strokeText(countries[e][1],50,newH*(.93-.07*e)),ctx.lineWidth=1.5,ctx.strokeStyle="rgb(0,0,50)",ctx.strokeText(countries[e][1],50,newH*(.93-.07*e)))}function drawMap(){ctx.drawImage(image,0,0,1193,873,0,0,newW,newH),drawNames(),image.src.includes("img/BCRESGHNP.png")&&(console.log("passesTest"),drawTucan())}function pickRightMap(){let e="";for(let n=0;n<countries.length;n++)countries[n][2]&&(e+=countries[n][0]);return e+=".png"}function mainAnimation(){drawMap();let e=!1;if(pressed&&gameOver&&curX<.3*newW&&curY>.8*newH&&resetGame(),pressed&&(void 0===id&&(!countries[6][2]&&curX>55&&curX<countries[6][3]+50&&curY<.53*newH&&curY>.47*newH?id=6:!countries[5][2]&&curX>55&&curX<countries[5][3]+50&&curY<.6*newH&&curY>.54*newH?id=5:!countries[4][2]&&curX>55&&curX<countries[4][3]+50&&curY<.67*newH&&curY>.61*newH?id=4:!countries[3][2]&&curX>55&&curX<countries[3][3]+50&&curY<.74*newH&&curY>.68*newH?id=3:!countries[2][2]&&curX>55&&curX<countries[2][3]+50&&curY<.81*newH&&curY>.75*newH?id=2:!countries[1][2]&&curX>55&&curX<countries[1][3]+50&&curY<.88*newH&&curY>.82*newH?id=1:!countries[0][2]&&curX>55&&curX<countries[0][3]+50&&curY<.95*newH&&curY>.89*newH&&(id=0)),drawDragged(id)),!pressed){if(6===id&&curX>=.625*newW&&curX<=.92*newW&&curY>=.675*newH&&curY<=.84*newH)countries[id][2]=e=!0;else if(5===id&&curX>=.385*newW&&curX<=.615*newW&&curY>=.305*newH&&curY<=.6*newH)if(curX<=.5425*newW&&curY<=.4325*newH){.1275*newH/(.1575*newW)*(curX-.385*newW)<-(curY-.4325*newH)||(countries[id][2]=e=!0)}else countries[id][2]=e=!0;else 4===id&&curX>=.3025*newW&&curX<=.615*newW&&curY>=.2375*newH&&curY<=.449*newH?curX>=.4155*newW&&curY>=.3075*newH?(m=.1415*newH/(.1995*newW),m*(curX-.4155*newW)>-(curY-.449*newH)||(countries[id][2]=e=!0)):curX<=.41*newW&&curY>=.3525*newH?(m=-.0965*newH/(.1075*newW),-m*(curX-.3025*newW)<curY-.3525*newH||(countries[id][2]=e=!0)):countries[id][2]=e=!0:3===id&&curX>=.1575*newW&&curX<=.361*newW&&curY>=.115*newH&&curY<=.3925*newH?curX>=.3135*newW&&curY<=.245*newH||curX<=.196*newW&&curY<=.2325*newH||(curX>=.285*newW&&curY>=.26*newH?(m=.1325*newH/(.076*newW),m*(curX-.285*newW)>-(curY-.3925*newH)||(countries[id][2]=e=!0)):countries[id][2]=e=!0):2===id&&curX>=.2625*newW&&curX<=.3875*newW&&curY>=.348*newH&&curY<=.4355*newH?curX>=.3075*newW&&curY<=.3835*newH?(m=.0355*newH/(.08*newW),m*(curX-.3075*newW)>curY-.348*newH||(countries[id][2]=e=!0)):countries[id][2]=e=!0:1===id&&curX>=.475*newW&&curX<=.6475*newW&&curY>=.5625*newH&&curY<=.784*newH?curX<=.625*newW&&curY>=.6425*newH?(m=.1415*newH/(.15*newW),m*(curX-.475*newW)<curY-.6425*newH||(countries[id][2]=e=!0)):countries[id][2]=e=!0:0===id&&curX>=.31*newW&&curX<=.3825*newW&&curY>=.0675*newH&&curY<=.2475*newH&&(countries[id][2]=e=!0);id=void 0,e&&imgSetter(pickRightMap()),e=!1}requestAnimationFrame(mainAnimation)}function drawDragged(e){id>=0&&(ctx.fillText(countries[id][1],curX-Math.floor(countries[id][3]/2),curY),ctx.lineWidth=2.5,ctx.strokeStyle="rgb(155,215,0)",ctx.strokeText(countries[id][1],curX-Math.floor(countries[id][3]/2),curY),ctx.lineWidth=1.5,ctx.strokeStyle="rgb(0,50,0)",ctx.strokeText(countries[id][1],curX-Math.floor(countries[id][3]/2),curY))}function countryCoord(){ctx.strokeStyle="rgb(0,0,0)",ctx.lineWidth=1,ctx.strokeRect(.1*newW,.85*newH,150,35)}canvas.ontouchstart=function(){},window.onresize=function(){width=canvas.width=window.innerWidth,height=canvas.height=window.innerHeight,setNewWH(),drawMap()},canvas.onmousedown=function(){pressed=!0},canvas.onmouseup=function(){pressed=!1},canvas.onmousemove=function(e){curX=window.Event?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),curY=window.Event?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)},setNewWH(),imgSetter("A.png"),image.onload=mainAnimation;let endCounter=0,xyz=1,dimmer=0;function drawTucan(){endCounter<225?(endCounter%1==0&&(xyz-=.004),endCounter%5==0&&(dimmer+=.015),ctx.fillStyle="rgba(255,255,255,"+dimmer+")",ctx.fillRect(0,0,newW,newH),ctx.drawImage(endImage,newW*xyz,newH*xyz,newW,newH),endCounter++):(ctx.fillStyle="rgba(255,255,255,.675)",ctx.fillRect(0,0,newW,newH),ctx.drawImage(endImage,.1*newW,.1*newH,newW,newH),ctx.fillText("Play Again",.1*newW,.9*newH),ctx.lineWidth=2.5,ctx.strokeStyle="rgb(0,155,215)",ctx.strokeText("Play Again",.1*newW,.9*newH),ctx.lineWidth=1.5,ctx.strokeStyle="rgb(0,0,50)",ctx.strokeText("Play Again",.1*newW,.9*newH),gameOver=!0)}function resetGame(){imgSetter("A.png"),gameOver=!1,endCounter=0,xyz=1,dimmer=0,countries.forEach(e=>{e[2]=!1})}